<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Particle Blastr - Dev Testing</title>

  <!-- @exclude -->

  <script src="//localhost:35729/livereload.js"></script>

  <!-- @endexclude -->

  <link rel="stylesheet" type="text/css" href="vendor/normalize.css" />
  <style type="text/css">
    body {
      width:100%;
      height:100%;

      overflow: hidden;

      background: url('img/checkerboard_cell.jpg');
      background-repeat: repeat;
    }

    #page-contents {
      position: fixed;
      display: block;
      height: 100%;
      width: 980px;
      min-height: 900px;

      text-align: center;
      margin: 0 auto;

    }

    #canvas1,
    #canvas2 {
      position: absolute;
      top:0;
      left:0;

      border: thin solid red;
    }

    h1 {
      width: 100%;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="page-contents">
    <h1> Click on the canvas to see a particle blast! </h1>
    <canvas id="canvas2" width="980" height="900"></canvas>
    <canvas id="canvas1" width="980" height="900"></canvas>
  </div>

  <script type="text/javascript" src="src/particle-blastr.js"></script>
  <script type="text/javascript">

    let canvas1 = document.getElementById('canvas1');
    let ctx    = canvas1.getContext('2d');
    //
    // ctx.fillStyle = `#000000`;
    // ctx.fillRect(100, 100, 15, 15);
    //

    const gravity = 22;
    // const gravity = 122;
    // const gravity = 42;
    // const gravity = 8;
    // const gravity = -8;
    // const gravity = 160;

    const gravityVariance = 6;

    // const blastLength = 2600;
    const blastLength = 1600;
    // const blastLength = 800;
    // const blastLength = 450;

    const pb = new ParticleBlastr({
      canvas: document.getElementById('canvas1'),
      
      // particleCount: 100,
      particleCount: 200,

      // particleColor: [255,60,0], 
      // particleColor: [255,0,255],
      // particleColor: [255,255,0],
      // particleColor: [0,255,255],

      // particleColors: [
      //   [255,0,0],
      //   [0,255,0],
      //   [0,0,255],
      //   [255,255,0],
      //   [0,255,255],
      //   [255,0,255]
      // ],

      // particleColors: [
      //   [235, 255,  0],
      //   [255, 190, 75],
      //   [220,  60, 10]
      // ],

      particleColors: [
        [  0, 120, 225],
        [  0, 180, 225],
        [  5, 100, 240]
      ],


      particleOpactiy: 1,
      particleEndOpacity: 0,



      // shape: ParticleBlastr.SHAPE.SQUARE,
      // particleSize: 20,

      // shape: ParticleBlastr.SHAPE.RECT,
      // particleWidth:  35,
      // particleHeight: 20,

      // shape: ParticleBlastr.SHAPE.ROUND_RECT,
      // particleWidth:  35,
      // particleHeight: 20,
      // particleBorderRadius: 30,

      shape: ParticleBlastr.SHAPE.CIRCLE,
      particleRadius: 8,

      sizeVariance: 10,

      particleMaxDistance: 4900,
      // allowNegY: true,

      blastLengthMs: blastLength,
      
      gravity: gravity,
      gravityVariance: gravityVariance,

      // TODO end states
      // particleEndSize: 0,
      // particleEndColor: [0, 0, 0],
      // particleEndColors: [],

      // TODO min distance
      // particleMinDist: 1200,

    });

    // const pb2 = new ParticleBlastr({
    //   cvs: document.getElementById('canvas2'),
      
    //   numPrts: 550,
    //   particleColor: 'rgba(25, 20, 10, 0.05)',

    //   prtMaxWidth:  35,
    //   prtMaxHeight: 35,

    //   prtMaxDist: 7000,
    //   // allowNegY: true,

    //   blastLengthMs: blastLength,
      
    //   gravity: gravity

    // });


    // document.addEventListener('click', (e) => {
    canvas1.addEventListener('click', (e) => {
      pb.startBlast( e.pageX,  e.pageY );
      // pb2.startBlast(e.pageX - (pb2.prtMaxWidth/2), e.pageY - (pb2.prtMaxHeight/2));
    });
  </script>
</body>
</html>